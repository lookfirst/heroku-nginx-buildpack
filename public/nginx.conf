worker_processes  1;
daemon off;

events {
	worker_connections  1024;
}

http {
	include       mime.types;
	default_type  application/octet-stream;

	sendfile        on;

	keepalive_timeout  65;

	upstream otile  {
		  server otile1.mqcdn.com;
	}
	
	server {
		listen       <%= ENV['PORT'] %>;
		server_name  localhost;
		access_log off;

		location / {
			proxy_pass  http://otile;
			proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
			proxy_redirect off;
			proxy_buffering off;
			proxy_set_header        Host            otile1.mqcdn.com;
#			proxy_set_header        X-Real-IP       $remote_addr;
#			proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
		}
	}
}
